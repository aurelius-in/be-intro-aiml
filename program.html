<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Program</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <a href="index.html"><img src="logo-main-sm.png" alt="BEST Logo" class="logo"></a>
    </header>
    <main>
        <div id="content">
            <h1 id="programTitle">Loading...</h1>
            <section id="objectives">
                <h2>Course Objectives</h2>
                <ul id="objectivesList"></ul>
            </section>
            <section id="modules">
                <h2>Modules and Topics</h2>
                <ul id="modulesList"></ul>
            </section>
            <section id="resources">
                <h2>Additional Resources</h2>
                <p>For more in-depth reading and resources, refer to the textbook:</p>
                <p id="textbook"></p>
            </section>
        </div>
    </main>
    <script>
        const queryString = window.location.search;
        const urlParams = new URLSearchParams(queryString);
        const type = urlParams.get('type');
        
        const jsonFile = `${type}.json`;

        fetch(jsonFile)
            .then(response => response.json())
            .then(data => {
                document.getElementById('programTitle').innerText = data.moduleTitle;

                const objectivesList = document.getElementById('objectivesList');
                data.moduleObjectives.forEach(objective => {
                    const li = document.createElement('li');
                    li.innerText = objective;
                    objectivesList.appendChild(li);
                });

                const modulesList = document.getElementById('modulesList');
                data.modules.forEach(module => {
                    const li = document.createElement('li');
                    const a = document.createElement('a');
                    a.href = `chapter.html?chapter=${module.link}`;
                    a.innerText = module.title;
                    li.appendChild(a);
                    modulesList.appendChild(li);
                });

                document.getElementById('textbook').innerHTML = `<a href="${data.additionalResources.textbookLink}">${data.additionalResources.textbookTitle}</a>`;
            })
            .catch(error => {
                console.error('Error loading the JSON file:', error);
                document.getElementById('content').innerText = 'Failed to load content. Please try again later.';
            });
    </script>
</body>
</html>
