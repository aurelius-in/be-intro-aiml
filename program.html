<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Program</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <a href="index.html"><img src="logo-1x1.svg" alt="BEST Logo" class="logo"></a>
    </header>
    <main>
        <div id="content">
            <h1 id="programTitle">Loading...</h1>
            <section id="objectives">
                <h2>Course Objectives</h2>
                <ul id="objectivesList"></ul>
            </section>
            <section id="modules">
                <h2>Modules and Topics</h2>
                <div id="modulesList"></div>
            </section>
            <section id="quizzes">
                <h2>Quizzes and Final Exam</h2>
                <div id="quizzesList">
                    <div><a href="quiz.html?quiz=quiz-module-1.json">Module 1 Quiz</a></div>
                    <div><a href="quiz.html?quiz=quiz-module-2.json">Module 2 Quiz</a></div>
                    <div><a href="quiz.html?quiz=quiz-module-3.json">Module 3 Quiz</a></div>
                    <div><a href="quiz.html?quiz=quiz-module-4.json">Module 4 Quiz</a></div>
                    <div><a href="quiz.html?quiz=quiz-module-5.json">Module 5 Quiz</a></div>
                    <div><a href="quiz.html?quiz=quiz-module-6.json">Module 6 Quiz</a></div>
                    <div><a href="quiz.html?quiz=quiz-module-7.json">Module 7 Quiz</a></div>
                    <div><a href="quiz.html?quiz=quiz-module-8.json">Module 8 Quiz</a></div>
                    <div><a href="quiz.html?quiz=quiz-module-9.json">Module 9 Quiz</a></div>
                    <div><a href="quiz.html?quiz=quiz-module-10.json">Module 10 Quiz</a></div>
                    <div><a href="quiz.html?quiz=final-exam.json">Final Exam</a></div>
                </div>
            </section>
            <section id="resources">
                <h2>Additional Resources</h2>
                <p>For more in-depth reading and resources, refer to the textbook:</p>
                <p id="textbook"></p>
            </section>
        </div>
    </main>
    <script>
        const queryString = window.location.search;
        const urlParams = new URLSearchParams(queryString);
        const type = urlParams.get('type');
        
        const jsonFile = `${type}.json`;

        fetch(jsonFile)
            .then(response => {
                if (!response.ok) {
                    throw new Error('Network response was not ok');
                }
                return response.json();
            })
            .then(data => {
                document.getElementById('programTitle').innerText = data.programTitle;

                const objectivesList = document.getElementById('objectivesList');
                data.courseObjectives.forEach(objective => {
                                        const li = document.createElement('li');
                    li.innerText = objective;
                    objectivesList.appendChild(li);
                });

                const modulesList = document.getElementById('modulesList');
                data.modules.forEach(module => {
                    const div = document.createElement('div');
                    const a = document.createElement('a');
                    a.href = `module.html?module=${module.link}`;
                    a.innerText = module.title;
                    div.appendChild(a);
                    modulesList.appendChild(div);
                });

                document.getElementById('textbook').innerHTML = `<a href="${data.additionalResources.textbookLink}">${data.additionalResources.textbookTitle}</a>`;
            })
            .catch(error => {
                console.error('Error loading the JSON file:', error);
                document.getElementById('content').innerText = 'Failed to load content. Please try again later.';
            });
    </script>
</body>
</html>

